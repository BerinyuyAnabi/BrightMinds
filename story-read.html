<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Read Story - Bright Minds</title>
    <script src="js/protect.js"></script>
    <link rel="stylesheet" href="css/main.css">
    <style>
        .story-container {
            max-width: 900px;
            margin: 50px auto;
            background: white;
            padding: 60px;
            border-radius: 30px;
            box-shadow: var(--shadow-xl);
        }
        
        .story-header {
            text-align: center;
            margin-bottom: 50px;
            padding-bottom: 30px;
            border-bottom: 3px solid var(--primary-blue);
        }
        
        .story-icon {
            font-size: 5rem;
            margin-bottom: 20px;
        }
        
        .story-header h1 {
            font-size: 3rem;
            color: var(--primary-blue);
            margin-bottom: 15px;
        }
        
        .story-meta {
            color: var(--gray);
            font-size: 1.2rem;
        }
        
        .story-content {
            font-size: 1.4rem;
            line-height: 2.2;
            color: var(--dark-gray);
            text-align: justify;
        }
        
        .story-content p {
            margin-bottom: 30px;
        }
        
        .story-content p:first-letter {
            font-size: 3rem;
            font-weight: bold;
            color: var(--primary-blue);
            float: left;
            margin-right: 10px;
            line-height: 1;
        }
        
        .moral-lesson {
            background: var(--gradient-ocean);
            padding: 35px;
            border-radius: 25px;
            margin: 40px 0;
            text-align: center;
            color: white;
        }
        
        .moral-lesson h3 {
            font-size: 2rem;
            margin-bottom: 20px;
        }
        
        .moral-lesson p {
            font-size: 1.3rem;
            line-height: 1.8;
        }
        
        @media (max-width: 768px) {
            .story-container {
                padding: 40px 30px;
                margin: 30px 20px;
            }
            
            .story-content {
                font-size: 1.2rem;
            }
        }
    </style>
</head>
<body>
    <div class="animated-bg"></div>
    
    <div class="story-container" id="storyContainer">
        <p style="text-align: center; color: var(--gray);">Loading story...</p>
    </div>
    
    <script src="js/dashboard.js"></script>
    <script>
        const stories = {
            1: {
                title: "The Brave Little Elephant",
                icon: "üêò",
                author: "Bright Minds Team",
                readingTime: 5,
                xpReward: 30,
                video: "elephant and monkey.mp4",
                content: `
Once upon a time, in the heart of a lush African savanna, there lived a little elephant named Ella. Unlike the other elephants in her herd, Ella was smaller and often felt nervous about trying new things.

One sunny morning, all the elephants gathered by the riverside for their daily drink. Suddenly, they heard a desperate cry. "Help! Help!" It was Timmy, a baby monkey who had fallen into the fast-flowing river and couldn't swim to safety.

All the big elephants looked at the river nervously. The current was strong, and the rocks were slippery. "It's too dangerous," said the eldest elephant. "We might get hurt."

But little Ella's heart couldn't ignore Timmy's cries. Despite her fear and her small size, she knew she had to do something. Taking a deep breath, she stepped into the river.

The water was cold and the current pushed against her, but Ella kept moving forward, step by step. She remembered what her mother had taught her: "Courage isn't the absence of fear, but acting despite it."

Finally, Ella reached Timmy and gently wrapped her trunk around him. With all her strength, she pulled him to safety on the riverbank. The herd erupted in cheers and trumpets!

From that day forward, Ella learned that being brave doesn't mean being big or fearless. It means having a kind heart and the courage to help others, even when you're scared.
                `,
                moral: "True bravery comes from having courage to do the right thing, even when we're afraid."
            },
            2: {
                title: "The Rainbow Painter",
                icon: "üé®",
                author: "Bright Minds Team",
                readingTime: 4,
                xpReward: 25,
                video: "girl paint.mp4",
                content: `
In a small village, there lived a young girl named Luna who loved to paint. But Luna had a problem - she only had one color: gray. Her paintings were always beautiful, but they were all in shades of gray.

"I wish I could paint in colors," Luna sighed one day. "Then my paintings would be as beautiful as the world around me!"

That night, Luna had a magical dream. A wise owl appeared and said, "Luna, colors aren't found in paint alone. They come from your heart, your imagination, and your unique way of seeing the world."

When Luna woke up, she didn't understand what the owl meant. She picked up her gray paint and started painting anyway.

As she painted, Luna noticed things she'd never seen before: how light creates different shades, how shadows tell stories, and how feelings can be shown without colors.

One day, a famous artist visited the village and saw Luna's work. "These are magnificent!" he exclaimed.

The artist was so impressed that he gave Luna a full set of rainbow colors as a gift. But Luna learned something important - true art comes from within.
                `,
                moral: "Use what you have and make it amazing ‚Äî creativity matters more than perfect tools."
            },
            3: {
                title: "The Curious Cat's Journey",
                icon: "üê±",
                author: "Bright Minds Team",
                readingTime: 6,
                xpReward: 35,
                video: "cart and turtle.mp4",
                content: `
In a cozy house at the end of Cherry Lane lived a cat named Whiskers. Whiskers was different from other cats - she was incredibly curious about everything!

While other cats were content sleeping and eating, Whiskers wanted to know: Why is the sky blue? How do birds fly? What makes flowers grow?

One day, Whiskers decided to go on an adventure to find answers.

First, she met a wise old turtle by the pond. "Why do you move so slowly?" she asked.

"I move slowly because I take time to notice life's beautiful details. Patience helps us see what others miss," the turtle replied.

Next, she met a family of birds. "How do you fly so gracefully?" she wondered.

"Every big achievement starts with small steps," the mother bird said.

Later, she met a caterpillar becoming a butterfly.

"How did you become so beautiful?"

"Sometimes we must go through difficult changes to become our best selves," the butterfly answered.

Whiskers returned home wiser, kinder, and more thoughtful ‚Äî she learned that curiosity is about the journey, not just the answers.
                `,
                moral: "Curiosity opens doors ‚Äî ask questions, listen, and learn from every answer."
            }
        };
        
        // Get story ID from URL
        const urlParams = new URLSearchParams(window.location.search);
        const storyId = urlParams.get('id') || '1';
        
        window.addEventListener('DOMContentLoaded', () => {
            const sessionData = localStorage.getItem('brightMindsSession');
            if (!sessionData) {
                window.location.href = 'index.html';
                return;
            }
            loadStory();
        });
        
        function loadStory() {
            const story = stories[storyId];
            if (!story) {
                alert('Story not found!');
                location.href = 'stories.html';
                return;
            }
            
            const container = document.getElementById('storyContainer');
            
            container.innerHTML = `
                <div class="story-header">
                    <div class="story-icon">${story.icon}</div>
                    <h1>${story.title}</h1>
                    <div class="story-meta">
                        By ${story.author} | ${story.readingTime} minute read
                    </div>
                </div>

                <video controls autoplay loop muted style="width:100%; max-height:420px; margin-bottom:30px; border-radius:20px;">
                    <source src="${story.video}" type="video/mp4">
                </video>
                
                <div class="story-content">
                    ${story.content.trim()
                        .split('\n\n')
                        .map(para => `<p>${para.trim()}</p>`)
                        .join('')}
                </div>
                
                <div class="moral-lesson">
                    <h3>‚ú® The Moral of the Story ‚ú®</h3>
                    <p>${story.moral}</p>
                </div>
                
                <div style="text-align: center; margin-top: 40px; display: flex; gap: 20px; justify-content: center; flex-wrap: wrap;">
                    <button class="btn btn-success btn-large" onclick="completeStory()">
                        <span class="btn-icon">‚úì</span>
                        I Finished Reading!
                    </button>
                    <button class="btn btn-secondary btn-large" onclick="location.href='stories.html'">
                        <span class="btn-icon">‚Üê</span>
                        Back to Stories
                    </button>
                </div>
            `;
        }
        
        function completeStory() {
            const story = stories[storyId];
            
            if (typeof awardXP === 'function') {
                awardXP(story.xpReward, Math.floor(story.xpReward / 3));
            }
            
            if (typeof showToast === 'function') {
                showToast('Great job reading! üìñ', 'success');
            }
            
            setTimeout(() => {
                location.href = 'dashboard.html';
            }, 2000);
        }
    </script>
</body>
</html>
